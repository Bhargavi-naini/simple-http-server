#!/bin/bash

set -eo pipefail

mkdir -p /opt/app-root/s2i


mv /tmp/src/* /opt/app-root/s2i
#mkdir -p /opt/app-root/src
#mv /tmp/src/* /opt/app-root/src
#mkdir -p /tmp/.s2i
#mv builder/ccp.yml /tmp/.s2i/ccp.yml
#mv /tmp/src/builder/passwd.template /tmp/.s2i/passwd.template
#mv /tmp/src/builder /opt/app-root/builder
#mv /tmp/src/*.sh /opt/app-root/bin 

# Make sure the S2I source directory is empty as we will use the image

# produced to run further S2I builds.
cp -Rf /tmp/src/. ./
#rm -rf /tmp/src

# Fixup permissions on directories and files.

#fix-permissions /opt/app-root
fix-permissions /opt/app-root/s2i
